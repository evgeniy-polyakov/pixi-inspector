{"version":3,"sources":["node_modules/browser-pack/_prelude.js","bin/ContextMenu.js","bin/PixiInspector.js","bin/StyleSheet.js","bin/inspect.js","bin"],"names":[],"mappings":";;;;;;;AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxIA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pixi-inspector.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ContextMenu = void 0;\r\nvar PIXI = require(\"pixi.js\");\r\nvar inspect_1 = require(\"./inspect\");\r\nvar ContextMenu = (function () {\r\n    function ContextMenu(event, renderer, data, style) {\r\n        var _this = this;\r\n        var div = document.createElement(\"div\");\r\n        div.style.position = \"fixed\";\r\n        div.className = \"pixi-inspector-context-anchor\";\r\n        document.body.append(div);\r\n        var ul = document.createElement(\"ul\");\r\n        ul.innerHTML = this.dataToHtml(data, \"0\", 0);\r\n        ul.style.margin = \"0\";\r\n        ul.className = \"pixi-inspector-context-menu pixi-inspector-context-menu-\" + style;\r\n        div.append(ul);\r\n        var x = Math.max(0, Math.min(window.innerWidth - ul.clientWidth, event.clientX));\r\n        var y = Math.max(0, Math.min(window.innerHeight - ul.clientHeight, event.clientY));\r\n        div.style.top = y + \"px\";\r\n        div.style.left = x + \"px\";\r\n        ul.querySelectorAll(\"li\").forEach(function (li) {\r\n            var _a;\r\n            (_a = li.querySelector(\"label\")) === null || _a === void 0 ? void 0 : _a.addEventListener(\"click\", function (event) {\r\n                _this.inspectElement(li);\r\n            });\r\n            li.querySelectorAll(\"span[data-texture]\").forEach(function (it) {\r\n                it.addEventListener(\"mouseover\", function (event) {\r\n                    _this.showTexturePopup(it);\r\n                });\r\n                it.addEventListener(\"mouseout\", function (event) {\r\n                    _this.hideTexturePopup();\r\n                });\r\n            });\r\n        });\r\n        this._data = data;\r\n        this._root = div;\r\n        this._style = style;\r\n        this._renderer = renderer;\r\n    }\r\n    ContextMenu.prototype.destroy = function () {\r\n        this._root.remove();\r\n    };\r\n    ContextMenu.prototype.dataToHtml = function (data, id, level) {\r\n        var _this = this;\r\n        var startPadding = 0.8;\r\n        var levelPadding = 1.4;\r\n        var branchPadding = 0.5;\r\n        return \"<li data-id=\\\"\" + id + \"\\\" data-visible=\\\"\" + (data.target.worldVisible && data.target.worldAlpha > 0) + \"\\\">\\n<label style=\\\"padding-left:\" + (levelPadding * level + startPadding) + \"em\\\">\" + this.getItemName(data, id) + \"</label>\\n<ul>\" + data.children.map(function (it, i) { return _this.dataToHtml(it, id + \"-\" + i, level + 1); }).join(\"\") + \"</ul>\\n<div style=\\\"left:\" + (levelPadding * level + branchPadding - startPadding) + \"em\\\" class=\\\"branch\\\"></div>\\n</li>\";\r\n    };\r\n    ContextMenu.prototype.getItemName = function (data, id) {\r\n        var name = \"<span>\" + this.getClassName(data.target) + \"</span>\";\r\n        var texture = data.target.texture;\r\n        if (texture instanceof PIXI.Texture) {\r\n            data.texture = texture;\r\n            name += \"<span>:&nbsp;</span><span data-texture=\\\"\" + id + \"\\\">\" + (texture === PIXI.Texture.EMPTY ? \"<u>empty</u>\" :\r\n                texture === PIXI.Texture.WHITE ? \"<u>white</u>\" :\r\n                    texture instanceof PIXI.RenderTexture ? \"<u>rendered</u>\" :\r\n                        texture.textureCacheIds && texture.textureCacheIds.length > 0 ?\r\n                            texture.textureCacheIds.slice(0, 2).map(function (it) { return \"<u>\" + it + \"</u>\"; }).join(\"<span>,&nbsp</span>\") :\r\n                            \"<u>unnamed</u>\") + \"</span>\";\r\n        }\r\n        return name;\r\n    };\r\n    ContextMenu.prototype.getClassName = function (obj) {\r\n        var className;\r\n        if (obj.constructor) {\r\n            if (obj.constructor.name) {\r\n                className = obj.constructor.name;\r\n            }\r\n            else {\r\n                var exec = /function\\s+(\\w+)\\(/.exec(obj.constructor.toString());\r\n                className = exec ? exec[1] : undefined;\r\n            }\r\n        }\r\n        return className || \"DisplayObject\";\r\n    };\r\n    ContextMenu.prototype.getData = function (data, ids) {\r\n        if (!data) {\r\n            return undefined;\r\n        }\r\n        ids.shift();\r\n        if (ids.length === 0) {\r\n            return data;\r\n        }\r\n        return this.getData(data.children[ids[0]], ids);\r\n    };\r\n    ContextMenu.prototype.inspectElement = function (li) {\r\n        var _a;\r\n        var ids = (_a = li.dataset.id) === null || _a === void 0 ? void 0 : _a.split(\"-\").map(function (it) { return parseInt(it); });\r\n        if (ids) {\r\n            var data = this.getData(this._data, ids);\r\n            if (data) {\r\n                inspect_1.inspect.call(data.target);\r\n            }\r\n        }\r\n    };\r\n    ContextMenu.prototype.showTexturePopup = function (span) {\r\n        var _a;\r\n        this.hideTexturePopup();\r\n        var ids = (_a = span.dataset.texture) === null || _a === void 0 ? void 0 : _a.split(\"-\").map(function (it) { return parseInt(it); });\r\n        if (!ids) {\r\n            return;\r\n        }\r\n        var data = this.getData(this._data, ids);\r\n        if (data === null || data === void 0 ? void 0 : data.texture) {\r\n            var renderer = this._renderer;\r\n            if (renderer && renderer.extract && typeof renderer.extract.image === \"function\") {\r\n                var vw = 12;\r\n                var size = window.innerWidth * vw / 100;\r\n                var sprite = new PIXI.Sprite(data.texture);\r\n                var scale = Math.min(1, size / sprite.width, size / sprite.height);\r\n                sprite.scale.set(scale);\r\n                var container = new PIXI.Container();\r\n                container.addChild(sprite);\r\n                var canvas = renderer.extract.canvas(container);\r\n                var rootRect = this._root.getBoundingClientRect();\r\n                var itemRect = span.parentElement.getBoundingClientRect();\r\n                this._root.append(canvas);\r\n                canvas.className = \"pixi-inspector-texture-popup pixi-inspector-texture-popup-\" + this._style;\r\n                canvas.style.position = \"absolute\";\r\n                if (data.texture.width > data.texture.height) {\r\n                    canvas.style.maxWidth = vw + \"vw\";\r\n                }\r\n                else {\r\n                    canvas.style.maxHeight = vw + \"vw\";\r\n                }\r\n                var top_1 = Math.max(-rootRect.top, Math.min(itemRect.top - rootRect.top, window.innerHeight - canvas.clientHeight - rootRect.top));\r\n                canvas.style.top = top_1 + \"px\";\r\n                var isLeft = rootRect.right + canvas.clientWidth > window.innerWidth;\r\n                if (isLeft) {\r\n                    canvas.style.right = \"100%\";\r\n                }\r\n                else {\r\n                    canvas.style.left = \"100%\";\r\n                }\r\n                this._textureImage = canvas;\r\n            }\r\n        }\r\n    };\r\n    ContextMenu.prototype.hideTexturePopup = function () {\r\n        if (this._textureImage) {\r\n            this._textureImage.remove();\r\n            this._textureImage = undefined;\r\n        }\r\n    };\r\n    return ContextMenu;\r\n}());\r\nexports.ContextMenu = ContextMenu;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PixiInspector = void 0;\r\nvar PIXI = require(\"pixi.js\");\r\nvar ContextMenu_1 = require(\"./ContextMenu\");\r\nvar StyleSheet_1 = require(\"./StyleSheet\");\r\nvar PixiInspector = (function () {\r\n    function PixiInspector(root, renderer, style) {\r\n        var _this = this;\r\n        this._tempRect = new PIXI.Rectangle();\r\n        this._enabled = false;\r\n        this.disablePixiRightClick = function (event) {\r\n            if (event.target === _this._renderer.view) {\r\n                if (_this._contextMenu) {\r\n                    _this._contextMenu.destroy();\r\n                    _this._contextMenu = undefined;\r\n                }\r\n                if ((event instanceof PointerEvent ? event.pointerType === \"mouse\" : true) && event.button === 2) {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                }\r\n            }\r\n        };\r\n        this.showContextMenu = function (event) {\r\n            if (event.target === _this._renderer.view) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                event.stopImmediatePropagation();\r\n                var point = _this.getStagePoint(event);\r\n                var data = _this.getContextMenuData(point, _this._root);\r\n                if (data) {\r\n                    if (_this._contextMenu) {\r\n                        _this._contextMenu.destroy();\r\n                    }\r\n                    _this._contextMenu = new ContextMenu_1.ContextMenu(event, _this._renderer, data, _this._style);\r\n                }\r\n            }\r\n        };\r\n        this._root = root;\r\n        this._renderer = renderer;\r\n        this._interaction = this._renderer.plugins.interaction;\r\n        this._styleSheet = this.createStyleSheet();\r\n        this._style = style || this.detectStyle();\r\n        this.enabled = true;\r\n    }\r\n    Object.defineProperty(PixiInspector.prototype, \"enabled\", {\r\n        get: function () {\r\n            return this._enabled;\r\n        },\r\n        set: function (value) {\r\n            if (this._enabled != value) {\r\n                this._enabled = value;\r\n                if (value) {\r\n                    document.head.appendChild(this._styleSheet);\r\n                    document.addEventListener(\"pointerdown\", this.disablePixiRightClick, true);\r\n                    document.addEventListener(\"mousedown\", this.disablePixiRightClick, true);\r\n                    document.addEventListener(\"contextmenu\", this.showContextMenu, true);\r\n                }\r\n                else {\r\n                    document.head.removeChild(this._styleSheet);\r\n                    document.removeEventListener(\"pointerdown\", this.disablePixiRightClick, true);\r\n                    document.removeEventListener(\"mousedown\", this.disablePixiRightClick, true);\r\n                    document.removeEventListener(\"contextmenu\", this.showContextMenu, true);\r\n                }\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    PixiInspector.prototype.getStagePoint = function (event) {\r\n        var point = { x: 0, y: 0 };\r\n        this._interaction.mapPositionToPoint(point, event.clientX, event.clientY);\r\n        return point;\r\n    };\r\n    PixiInspector.prototype.flattenDescendants = function (target, result) {\r\n        if (target instanceof PIXI.Container && target.children.length > 0) {\r\n            for (var _i = 0, _a = target.children; _i < _a.length; _i++) {\r\n                var child = _a[_i];\r\n                this.flattenDescendants(child, result);\r\n            }\r\n        }\r\n        else {\r\n            result.push(target);\r\n        }\r\n        return result;\r\n    };\r\n    PixiInspector.prototype.getContextMenuData = function (point, target) {\r\n        var _this = this;\r\n        var sprites = this.flattenDescendants(target, []).filter(function (it) {\r\n            var rect = it.getBounds(false, _this._tempRect);\r\n            return point.x >= rect.x && point.x <= rect.x + rect.width &&\r\n                point.y >= rect.y && point.y <= rect.y + rect.height;\r\n        });\r\n        if (sprites.length > 0) {\r\n            var nodes = [];\r\n            var rootNode = void 0;\r\n            var _loop_1 = function (sprite) {\r\n                var node = { target: sprite, children: [] };\r\n                var parent_1 = sprite.parent;\r\n                while (parent_1) {\r\n                    var parentNode = nodes.filter(function (it) { return it.target === parent_1; })[0];\r\n                    if (parentNode) {\r\n                        if (parentNode.children.indexOf(node) < 0) {\r\n                            parentNode.children.push(node);\r\n                        }\r\n                    }\r\n                    else {\r\n                        parentNode = { target: parent_1, children: [node] };\r\n                        nodes.push(parentNode);\r\n                    }\r\n                    if (parent_1 === target) {\r\n                        rootNode = parentNode;\r\n                    }\r\n                    node = parentNode;\r\n                    parent_1 = parent_1.parent;\r\n                }\r\n            };\r\n            for (var _i = 0, sprites_1 = sprites; _i < sprites_1.length; _i++) {\r\n                var sprite = sprites_1[_i];\r\n                _loop_1(sprite);\r\n            }\r\n            return rootNode;\r\n        }\r\n        return undefined;\r\n    };\r\n    PixiInspector.prototype.createStyleSheet = function () {\r\n        var element = document.createElement(\"style\");\r\n        element.innerText = StyleSheet_1.StyleSheet;\r\n        return element;\r\n    };\r\n    PixiInspector.prototype.detectStyle = function () {\r\n        return window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\";\r\n    };\r\n    return PixiInspector;\r\n}());\r\nexports.PixiInspector = PixiInspector;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StyleSheet = void 0;\r\nexports.StyleSheet = \"\\n    .pixi-inspector-context-menu,\\n    .pixi-inspector-context-menu ul {\\n        list-style: none;\\n        margin: 0;\\n        padding: 0;\\n    }\\n\\n    .pixi-inspector-texture-popup,\\n    .pixi-inspector-context-menu {\\n        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n        font-size: 12px;\\n        color: #202124;\\n        background: #fff;\\n        border: 1px solid #dadce0;\\n        box-shadow: 4px 4px 3px -1px rgba(0, 0, 0, 0.5);\\n        line-height: 1.2;\\n        max-height: 100vh;\\n        max-width: 100vw;\\n        overflow: auto;\\n    }\\n\\n    .pixi-inspector-context-menu > li:first-child {\\n        padding-top: 0.25em;\\n    }\\n\\n    .pixi-inspector-context-menu > li:last-child {\\n        padding-bottom: 0.25em;\\n    }\\n\\n    .pixi-inspector-context-menu ul li {\\n        padding: 0;\\n        position: relative;\\n    }\\n\\n    .pixi-inspector-context-menu li label {\\n        display: block;\\n        padding: 0 1.4em;\\n        white-space: nowrap;\\n        cursor: pointer;\\n    }\\n\\n    .pixi-inspector-context-menu li label span {\\n        padding: 0.3em 0;\\n        display: inline-block;\\n    }\\n\\n    .pixi-inspector-context-menu li label:hover {\\n        background: #c8c8c9;\\n    }\\n\\n    .pixi-inspector-context-menu ul > li > .branch {\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        height: 100%;\\n        width: 0.8em;\\n        border-left: #72777c 1px dotted;\\n        pointer-events: none;\\n    }\\n\\n    .pixi-inspector-context-menu ul > li > .branch:before {\\n        content: '';\\n        position: absolute;\\n        top: 0.9em;\\n        left: 0;\\n        width: 100%;\\n        border-top: #72777c 1px dotted;\\n    }\\n\\n    .pixi-inspector-context-menu ul > li:last-child > .branch {\\n        height: 0.8em;\\n    }\\n\\n    .pixi-inspector-context-menu li[data-visible=false] {\\n        color: #72777c;\\n    }\\n\\n    .pixi-inspector-context-menu span[data-texture] u {\\n        text-decoration: underline;\\n    }\\n\\n    .pixi-inspector-texture-popup {\\n        min-width: 72px;\\n        object-fit: contain;\\n        object-position: center;\\n        pointer-events: none;\\n        background-image: url(\\\"data:image/svg+xml;utf8,\" + encodeURIComponent('<svg width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><rect height=\"12\" width=\"12\" y=\"0\" x=\"12\" fill=\"#dadce0\"/><rect height=\"12\" width=\"12\" y=\"12\" x=\"0\" fill=\"#dadce0\"/></svg>') + \"\\\");\\n    }\\n\\n    .pixi-inspector-texture-popup-dark {\\n        background-image: url(\\\"data:image/svg+xml;utf8,\" + encodeURIComponent('<svg width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><rect height=\"12\" width=\"12\" y=\"0\" x=\"12\" fill=\"#3c4043\"/><rect height=\"12\" width=\"12\" y=\"12\" x=\"0\" fill=\"#3c4043\"/></svg>') + \"\\\");\\n    }\\n\\n    .pixi-inspector-context-menu-dark,\\n    .pixi-inspector-texture-popup-dark {\\n        color: #e8eaed;\\n        background-color: #292a2d;\\n        border-color: #3c4043;\\n    }\\n\\n    .pixi-inspector-context-menu-dark li label:hover {\\n        background-color: #4b4c4f;\\n    }\\n\\n    .pixi-inspector-context-menu-dark ul > li > .branch,\\n    .pixi-inspector-context-menu-dark ul > li > .branch:before {\\n        border-color: #8b9196;\\n    }\\n\\n    .pixi-inspector-context-menu-dark li[data-visible=false] {\\n        color: #8b9196;\\n    }\\n\";\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.inspect = void 0;\r\nfunction inspect() {\r\n    debugger;\r\n}\r\nexports.inspect = inspect;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./PixiInspector\"), exports);\r\n"],"sourceRoot":"."}